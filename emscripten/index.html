<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WASM Test!</title>
  <script src="wasm_webgl2.js"></script>
  <script>
    const resizeCanvas = () => {
      const canvas = document.getElementById("canvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    };

    const init = () => {
      resizeCanvas();

      const id_ptr = Module.allocateUTF8("canvas");
      Module._init(id_ptr);
      Module._free(id_ptr);

      const onFrame = (timestamp) => {
        Module._update(timestamp);
        Module._render();
        window.requestAnimationFrame(onFrame);  
      };

      window.requestAnimationFrame(onFrame);
    };

    Module.onRuntimeInitialized = init;

    window.addEventListener('resize', () => {
      resizeCanvas();
    });
  </script>
  <style>
    html, body {
      margin: 0;
    }
    #canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <canvas id="canvas" width="100" height="100"></canvas>
</body>
</html>
